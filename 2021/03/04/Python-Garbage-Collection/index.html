<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Python Garbage Collection | Atlantis</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Python Garbage Collection</h1><a id="logo" href="/.">Atlantis</a><p class="description">pomo16的博客</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/toolbox/"><i class="fa fa-book"> 工具箱</i></a><a href="/community/"><i class="fa fa-comments"> 常用社区</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Python Garbage Collection</h1><div class="post-meta">Mar 4, 2021<span> | </span><span class="category"><a href="/categories/python/">python</a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 2.1k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 7</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="post-content"><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>Python 的垃圾回收以引用计数机制（Reference Counting）为主，并配合使用标记 - 清除（Mark and Sweep）和分代回收（Generational Collection）等 GC 策略。</p>
<h2 id="一、引用计数-Reference-Counting"><a href="#一、引用计数-Reference-Counting" class="headerlink" title="一、引用计数 Reference Counting"></a>一、引用计数 Reference Counting</h2><p>Python 中主要依赖引用计数来完成垃圾回收</p>
<h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><p>Python 的每个对象内部都会维护一个引用计数器，程序运行过程中会实时更新引用计数器的值，以此来反映引用当前对象的数量。当有新引用指向该对象时，引用计数器加1；当指向对象的引用失效时，引用计数器减1。当引用计数器数值为0时，该对象的内存就会被释放掉。可以通过 sys 包的 getrefcount() 来获取一个名称所引用的对象当前的引用计数（ps：这里 getrefcount() 本身会使得引用计数加一）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sys.getrefcount(a)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>引用计数加1的情况：</p>
<ul>
<li>对象被创建，e.g. a=1</li>
<li>对象被引用，e.g. b=a</li>
<li>对象作为参数，被传入函数</li>
<li>对象作为一个元素，被放入容器中</li>
</ul>
</li>
<li><p>引用计数减1的情况：</p>
<ul>
<li>对象别名被显示销毁 del</li>
<li>对象别名被赋予新的对象</li>
<li>一个对象离开他的作用域</li>
<li>对象所在的容器被销毁或者是从容器中删除对象</li>
</ul>
</li>
</ul>
<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ul>
<li>逻辑简单、高效执行、实时性高，一旦某个对象的引用计数归零，内存就会被释放，无需像其他 GC 方法需要等到某个时机执行</li>
<li>GC 时间被打平，对运行中的程序影响较小</li>
</ul>
<h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><ul>
<li>逻辑简单但有一定的实现成本，每个对象都需要独立的空间维护引用计数器，加大了对空间的负担</li>
<li>尽管 GC 时间被打平，但在一些场景下也会比较慢。在释放一个大对象时，如字典，需要对引用的所有对象循环嵌套调用，时间花销较大</li>
<li>引用计数无法避免循环引用的问题，必须通过其他 GC 策略来辅助解决，这也导致一些高级语言如 Java 的 GC 没有采用引用计数机制</li>
</ul>
<h4 id="循环引用"><a href="#循环引用" class="headerlink" title="循环引用"></a>循环引用</h4><p>当两个对象互相引用、且不存在任何外部引用时，两个对象的引用计数会始终为1，永远不会被垃圾回收。举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># list1和list2引用的对象引用计数加1</span></span><br><span class="line">list1 = []</span><br><span class="line">list2 = []</span><br><span class="line"><span class="comment"># list1和list2的对象互相引用，对象引用计数分别加1，即为2</span></span><br><span class="line">list1.append(list2)</span><br><span class="line">list2.append(list1)</span><br><span class="line"><span class="comment"># list1和list2引用的对象引用计数减1，但对象的引用计数仍然为1，且永远无法归0</span></span><br><span class="line"><span class="keyword">del</span> list1</span><br><span class="line"><span class="keyword">del</span> list2</span><br></pre></td></tr></table></figure>
<p>为了解决循环引用问题，Python 又引入了以下两种 GC 策略。</p>
<h2 id="二、标记-清除-Mark-and-Sweep"><a href="#二、标记-清除-Mark-and-Sweep" class="headerlink" title="二、标记 - 清除 Mark and Sweep"></a>二、标记 - 清除 Mark and Sweep</h2><p>Python 采用标记 - 清除算法来解决容器对象可能产生的循环引用问题。（ps：只有容器对象才有可能产生循环引用，如列表、字典、自定义的类、元组等等。像整型、字符串等基础数据类型并不会出现循环引用。）</p>
<h4 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h4><p>标记 - 清除是一种基于 Tracing 的垃圾回收算法，主要分为两个阶段：第一阶段是标记，把所有存活对象打上标记；第二阶段是清除，对没有标记的失活对象进行回收。</p>
<ul>
<li>标记阶段：遍历所有对象，如果是可达的，说明还有对象引用它，则该对象被标记（ps：GC root 一般是一些全局变量、调用栈、寄存器等不可被删除的对象）</li>
<li>清除阶段：再次遍历对象，如果发现某个对象没有被标记为可达，则将其回收</li>
</ul>
<p><img src="https://pomo-blog.oss-cn-shenzhen.aliyuncs.com/article/317.gif" style="zoom:67%;"></p>
<h4 id="详细说明"><a href="#详细说明" class="headerlink" title="详细说明"></a>详细说明</h4><blockquote>
<p>参考：<a href="https://devguide.python.org/garbage_collector/" target="_blank" rel="noopener">CPython 垃圾收集器设计</a></p>
</blockquote>
<p>在标记 - 清除算法中，为了追踪容器对象，需要每个容器对象维护两个额外的指针，用来将容器对象组成一个双向链表（double-linked lists），指针分别指向前后两个容器对象，方便插入和删除操作。Python 解释器（CPython）维护了两个这样的双向链表，一个链表存放着需要被扫描的容器对象（Object to Scan），另一个链表存放着临时不可达对象（Unreachable）。下面举例说明标记-清除的详细过程：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gc</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Link</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, next_link=None)</span>:</span></span><br><span class="line">        self.next_link = next_link</span><br><span class="line"></span><br><span class="line">link_3 = Link()</span><br><span class="line">link_2 = Link(link_3)</span><br><span class="line">link_1 = Link(link_2)</span><br><span class="line">link_3.next_link = link_1</span><br><span class="line">A = link_1</span><br><span class="line"><span class="keyword">del</span> link_1, link_2, link_3</span><br><span class="line"></span><br><span class="line">link_4 = Link()</span><br><span class="line">link_4.next_link = link_4</span><br><span class="line"><span class="keyword">del</span> link_4</span><br><span class="line"></span><br><span class="line"><span class="comment"># Collect the unreachable Link object (and its .__dict__ dict).</span></span><br><span class="line">gc.collect()</span><br><span class="line"><span class="comment"># Output: 2</span></span><br></pre></td></tr></table></figure>
<p>该例子中，link1、link2、link3 形成引用环，同时 link1 还被名称 A 引用。link4 自引用，也构成一个引用环。在垃圾收集器中，每一个节点除了有一个记录当前引用计数的变量 ref_count 还有一个 gc_ref 变量，这个 gc_ref 是 ref_count 的一个副本，所以初始值为 ref_count 的大小。</p>
<p><img src="https://pomo-blog.oss-cn-shenzhen.aliyuncs.com/article/318.png" alt></p>
<ol>
<li>GC 启动时，遍历 Object to Scan 链表中的容器对象，并且将当前对象所引用的所有对象的 gc_ref 减 1。这一步相当于解除了循环引用的影响，因为只有真正被外部引用的对象才满足 gc_ref &gt; 1。</li>
</ol>
<p><img src="https://pomo-blog.oss-cn-shenzhen.aliyuncs.com/article/319.png" alt></p>
<ol start="2">
<li>GC 再次扫描所有的容器对象，如果对象的 gc_ref 为0，则该对象被标记为 GC_TENTATIVELY_UNREACHABLE ，并且被移至 Unreachable 链表中（link3、link4）。（下图为处理了 link3 和 link4 的时刻，link1 和 link2 还没被处理）</li>
</ol>
<p><img src="https://pomo-blog.oss-cn-shenzhen.aliyuncs.com/article/320.png" alt></p>
<ol start="3">
<li>紧接着2，如果对象的 gc_ref 不为0，那么这个对象就会被标记为 GC_REACHABLE（link1）。同时当 GC 发现一个节点是可达的，则会从该节点出发可以到达的所有节点标记为 GC_REACHABLE。如果被标记为 GC_REACHABLE 的节点在 Unreachable 链表中，则需要将其移回 Object to Scan 链表中（link3）。</li>
</ol>
<p><img src="https://pomo-blog.oss-cn-shenzhen.aliyuncs.com/article/321.png" alt></p>
<ol start="4">
<li>第二次遍历结束后，存在于 Unreachable 链表中的对象就是真正需要被释放的对象，GC 随即释放。（link4）</li>
</ol>
<h4 id="Notice"><a href="#Notice" class="headerlink" title="Notice"></a>Notice</h4><p>标记 - 清除 执行时会 STW （stop the world），整个应用程序会被暂停直到标记 - 清除结束后才会恢复。</p>
<h2 id="三、分代回收-Generational-Collection"><a href="#三、分代回收-Generational-Collection" class="headerlink" title="三、分代回收 Generational Collection"></a>三、分代回收 Generational Collection</h2><p>由于 标记 - 清除 会 STW，为了限制垃圾回收的时间，Python 通过引入分代回收来优化自身的垃圾回收机制，以空间换时间的方式来提高垃圾回收效率。</p>
<h4 id="先验知识"><a href="#先验知识" class="headerlink" title="先验知识"></a>先验知识</h4><ul>
<li>分代回收思想基于一个统计事实：对于程序，存在一定比例的内存块的生存周期比较短；而剩下的内存块，生存周期会比较长，甚至会从程序开始一直持续到程序结束。生存期较短对象的比例通常在 80%～90% 之间。</li>
<li>简而言之，对象存在时间越长，越可能不是垃圾，应该越少去收集。这样在执行 标记-清除 算法时可以有效减小遍历的对象数，从而提高垃圾回收的速度。</li>
</ul>
<h4 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h4><ul>
<li>Python GC 给对象定义了三种世代(0,1,2)，每一个新生对象在 generation 0 中；如果它在一轮 GC 扫描中活了下来，那么它将被移至 generation 2，在那里他将较少的被扫描；如果它又活过了一轮 GC，它又将被移至 generation 2，在那里它被扫描的次数将会更少。</li>
<li>GC = 垃圾检查 + 垃圾回收。垃圾检查触发时机：世代中的对象达到一定的数目。</li>
<li>每个世代都有自己的阈值，且越老年代的阈值会越小（阈值越小表示垃圾检查的频率越小）。<ul>
<li>阈值解释（以 (700, 10, 10) 为例）：<ul>
<li>第一个参数 700 表示距离上一次 generation 0 垃圾检查，Python 分配内存数目减去释放内存的数目，如果超过 700 就会触发 generation 0 的垃圾检查</li>
<li>第二个参数 10 表示距离上一次 generation 1 垃圾检查，generation 0 垃圾检查的次数</li>
<li>第三个参数 10 表示距离上一次 generation 2 垃圾检查，generation 1 垃圾检查的次数</li>
</ul>
</li>
<li>通过以下两个函数可以查询和调整阈值：</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gc.get_threshold() <span class="comment"># (threshold0, threshold1, threshold2). default (700, 10, 10)</span></span><br><span class="line">gc.set_threshold(threshold0[, threshold1[, threshold2]])</span><br></pre></td></tr></table></figure>
<h4 id="垃圾回收触发时机"><a href="#垃圾回收触发时机" class="headerlink" title="垃圾回收触发时机"></a>垃圾回收触发时机</h4><ol>
<li>调用 <code>gc.collect()</code>,需要先导入 <code>gc</code> 模块。</li>
<li>自动垃圾回收：当 <code>gc</code> 模块的计数器达到阀值的时候（上述情况）。</li>
<li>程序退出的时候。</li>
</ol>
</div><div class="tags"><a href="/tags/python/">python</a></div><div class="post-nav"><a class="next" href="/2020/07/15/Hive/">Hive</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ElasticSearch/">ElasticSearch</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/data/">data</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/go/">go</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">19</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/Redis/">Redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/jsp/">jsp</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/jsp/Servlet/">Servlet</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/projects/">projects</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/docker/">docker</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/微信小程序/">微信小程序</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/ElasticSearch/" style="font-size: 15px;">ElasticSearch</a> <a href="/tags/Eclipse/" style="font-size: 15px;">Eclipse</a> <a href="/tags/go/" style="font-size: 15px;">go</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/rpc/" style="font-size: 15px;">rpc</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/JavaWeb/" style="font-size: 15px;">JavaWeb</a> <a href="/tags/jsp/" style="font-size: 15px;">jsp</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/vim/" style="font-size: 15px;">vim</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/七牛云/" style="font-size: 15px;">七牛云</a> <a href="/tags/CDN/" style="font-size: 15px;">CDN</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/RSS/" style="font-size: 15px;">RSS</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/jQuery/" style="font-size: 15px;">jQuery</a> <a href="/tags/ftp/" style="font-size: 15px;">ftp</a> <a href="/tags/jre/" style="font-size: 15px;">jre</a> <a href="/tags/jdk/" style="font-size: 15px;">jdk</a> <a href="/tags/projects/" style="font-size: 15px;">projects</a> <a href="/tags/微信小程序/" style="font-size: 15px;">微信小程序</a> <a href="/tags/Servlet/" style="font-size: 15px;">Servlet</a> <a href="/tags/IO/" style="font-size: 15px;">IO</a> <a href="/tags/hive/" style="font-size: 15px;">hive</a> <a href="/tags/Hadoop/" style="font-size: 15px;">Hadoop</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/集合/" style="font-size: 15px;">集合</a> <a href="/tags/操作系统/" style="font-size: 15px;">操作系统</a> <a href="/tags/数组/" style="font-size: 15px;">数组</a> <a href="/tags/String/" style="font-size: 15px;">String</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/JVM/" style="font-size: 15px;">JVM</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/03/04/Python-Garbage-Collection/">Python Garbage Collection</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/15/Hive/">Hive</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/15/Hadoop核心组件/">Hadoop核心组件</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/05/Docker安装ES及IK分词器/">Docker安装ES相关</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/03/Go-数组和切片/">Go 数组、字符串和切片</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/02/Go-struct-类型Channel/">Go struct{}类型Channel</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/16/Concurrency-in-Go/">Concurrency in Go</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/22/Docker搭建FTP/">Docker搭建FTP</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/30/Go-Garbage-Collection/">Go Garbage Collection</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/20/git/">git</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/pomo16" title="我的Github" target="_blank">我的Github</a><ul></ul><a href="https://blog.csdn.net/pomo16" title="我的CSDN" target="_blank">我的CSDN</a><ul></ul><a href="http://pomo16.coding.me/" title="我的老博客(荒废已久)" target="_blank">我的老博客(荒废已久)</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">Atlantis.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script><!-- 添加点击爱心功能--><script type="text/javascript" src="/js/clicklove.js?v=0.0.0"></script></div></body></html>