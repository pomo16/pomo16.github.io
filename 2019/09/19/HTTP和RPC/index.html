<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>HTTP和RPC | Atlantis</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">HTTP和RPC</h1><a id="logo" href="/.">Atlantis</a><p class="description">pomo16的博客</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/toolbox/"><i class="fa fa-book"> 工具箱</i></a><a href="/community/"><i class="fa fa-comments"> 常用社区</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">HTTP和RPC</h1><div class="post-meta">Sep 19, 2019<span> | </span><span class="category"><a href="/categories/web/">web</a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 2k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 7</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="post-content"><h2 id="Why-RPC？"><a href="#Why-RPC？" class="headerlink" title="Why RPC？"></a>Why RPC？</h2><p>在 HTTP 和 RPC 的选择上，可能有些人是迷惑的，主要是因为有些 RPC 框架配置复杂，如果走 HTTP 也能完成同样的功能，那么为什么要选择 RPC？</p>
<p>RPC，即 Remote Procedure Call，远程过程调用，主要是基于 TCP/IP 协议。而 HTTP 服务主要是基于 HTTP 协议的。我们都知道 HTTP 协议是在传输层协议 TCP 之上的，所以就效率来看的话，RPC 当然是要更胜一筹。另外， HTTP 的最大优势在于双端异构下的无障碍传输，但由于公司内部服务基本不存在异构的情况，所以这个优点微乎其微。所以，RPC 主要用于公司内部的服务调用，性能消耗低，传输效率高，服务治理方便。HTTP 主要用于对外的异构环境，浏览器接口调用，APP 接口调用，第三方接口调用等。</p>
<h2 id="与-HTTP-的异同"><a href="#与-HTTP-的异同" class="headerlink" title="与 HTTP 的异同"></a>与 HTTP 的异同</h2><h4 id="传输协议"><a href="#传输协议" class="headerlink" title="传输协议"></a>传输协议</h4><p>RPC：可基于 TCP 也可基于 HTTP</p>
<p>HTTP：HTTP协议</p>
<h4 id="传输效率"><a href="#传输效率" class="headerlink" title="传输效率"></a>传输效率</h4><p>RPC：使用自定义的 TCP 协议，可以让请求报文体积更小，或者使用 HTTP2 协议，也可以很好的减少报文的体积，提高传输效率</p>
<p>HTTP：如果是基于 HTTP1.1 的协议，请求中会包含很多无用的内容，如果是基于 HTTP2.0，那么简单的封装以下是可以作为一个 RPC 来使用的</p>
<h4 id="性能消耗（主要在于序列化和反序列化的耗时）"><a href="#性能消耗（主要在于序列化和反序列化的耗时）" class="headerlink" title="性能消耗（主要在于序列化和反序列化的耗时）"></a>性能消耗（主要在于序列化和反序列化的耗时）</h4><p>RPC：可以基于 thrift 实现高效的二进制传输</p>
<p>HTTP：超文本传输协议，大部分是通过 json 来实现的，字节大小和序列化耗时都比 thrift 要更消耗性能</p>
<h4 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h4><p>RPC：基本都自带了负载均衡策略</p>
<p>HTTP：需要配置 Nginx，HAProxy 来实现</p>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><p>rpc 框架一般还包含以下 HTTP 没有的高级功能：</p>
<ul>
<li>服务治理（下游服务新增，重启，下线时如何不影响上游调用者）</li>
<li>服务熔断/降级</li>
<li>流量监控等等</li>
</ul>
<h2 id="RPC-框架-——基于-Thrift-服务的-Kite"><a href="#RPC-框架-——基于-Thrift-服务的-Kite" class="headerlink" title="RPC 框架 ——基于 Thrift 服务的 Kite"></a>RPC 框架 ——基于 Thrift 服务的 Kite</h2><p>一个 rpc 调用，一般分为以下几步</p>
<ol>
<li>发送方将请求序列化</li>
<li>发送方通过网络发送</li>
<li>接收方通过网络接受</li>
<li>接收方反序列化得到请求</li>
</ol>
<p>当然在实际使用中还有很多额外的工作要做，服务端要监听端口，客户端要进行链接，服务端还要选择如何处理请求，多线程，线程通信等等一系列工作，需要处理有很多。</p>
<h4 id="Thrift"><a href="#Thrift" class="headerlink" title="Thrift"></a>Thrift</h4><p>Thrift 通过分层的方法，把整个过程分为四层，每一层解决一个问题，上下层之间提供服务。</p>
<ol>
<li>server：完成端口的监听，当有链接到来时为其创建 transport，protocol，并调用相应的 processor 处理</li>
<li>processor：对外提供一个统一的 process(in, out protocol) 接口</li>
<li>protocol：完成序列化</li>
<li>transport: 完成具体的传输功能（通过网络发送，写入磁盘等）</li>
</ol>
<p>一个大概的处理过程例子如下：（我觉得图里的序列化和反序列化写反了）</p>
<p><img src="https://pomo-blog.oss-cn-shenzhen.aliyuncs.com/article/264.png" alt="image-20190903153604699"></p>
<p>因为 thrift 采用了分层，使得各层之间可以互相独立，所以如图中标注，虚线以下的代码是静态生成的，这部分代码，主要是通过传入的 TProtocol 完成反序列化，然后将得到的请求传递给用户注册进的 Handler 去处理，处理完以后，再通过 TProtocol 序列化应答发送回去。下面这部分，就是工具通过 idl 生成的，一般称为 stub。stub 通过传入的 TProtocol 完成读取数据，反序列化，调用 handler 处理，序列化应答，发送功能。</p>
<p>虚线以上，完成了链接的建立，在用链接创建 TTrannport，用 TTransport 创建 TProtocol。这部分决定了链接如何建立，序列化格式是什么。最后将封装了序列化/反序列化操作的 TProtocol 传递给 stub。</p>
<p>Thrift 这种分层的设计很好的将具体的序列化/反序列化操作与普通的服务端链接建立，数据读取，协议格式等进行了解藕，服务端可以专心在虚线以上部分的建设，其余的交给 stub。</p>
<h4 id="Kite"><a href="#Kite" class="headerlink" title="Kite"></a>Kite</h4><p>kite 框架，其实完成的就是上一节说的那幅图中的虚线以上部分。对照图，可以分为三部分：</p>
<ul>
<li><p>为新链接建立 TProtocol 对象</p>
</li>
<li><p>把用户的 Handler 注册到 TProcessor 中</p>
</li>
<li>把 TProcessor 注册到 kite 框架中</li>
</ul>
<h5 id="构造-TProtocol-对象"><a href="#构造-TProtocol-对象" class="headerlink" title="构造 TProtocol 对象"></a>构造 TProtocol 对象</h5><ol>
<li>kite 直接使用了 golang 标准库 net。net.Listen 监听，然后直接开启一个 for loop 开始 Accept。</li>
<li>Accept 完成链接建立以后得到 net.Conn 对象。</li>
<li>开启协程处理接下来的步骤。</li>
<li><p>用 net.Conn 构造 TTransport 对象，再构造 TProtocol 对象。</p>
<p>这几步和上图中描述的是差不多的。接下来是把 Handler 注册到 stub 中，并且把 stub 注册到 kite 框架中。stub 代码是工具已经生成的，对外提供了注册接口。Handler 代码是 kitool 工具生成的，注册操作也是 kitool 生成的代码中完成的。</p>
</li>
</ol>
<p>kitool 工具的角色其实有两个功能：</p>
<ul>
<li>为 thrift 生成的 stub 代码，生成 Handler</li>
<li>将 stub 注册到 kite 框架</li>
</ul>
<h5 id="Handler-注册"><a href="#Handler-注册" class="headerlink" title="Handler 注册"></a>Handler 注册</h5><p>kitool 默认生成了一个 Handler，然后调用了 stub 的注册完成注册，这一部分比较简单</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello.NewHelloServiceProcessor(&amp;HelloServiceHandler&#123;&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="stub-注册"><a href="#stub-注册" class="headerlink" title="stub 注册"></a>stub 注册</h5><p>stub 是通过工具从 idl 中生成的，独立于 kite 框架。框架中提供了接口将外部的 stub 注册进来。在 kite 框架中有一个 export 的全局变量 Processor thrift.TProcessor，给这个变量赋值就完成了 stub 的注册。</p>
<p>实际上这个操作是由 kitool 生成的代码完成的。通过 kitool 生成的项目在项目根目录下有一个 kite.go 文件，这个文件里就完成了 stub 的注册：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	kite.Processor = Hello.NewHelloServiceProcessor(&amp;HelloServiceHandler&#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后，把 TProtocol 交给 Processor 处理即可。</p>
<h4 id="Middleware"><a href="#Middleware" class="headerlink" title="Middleware"></a>Middleware</h4><p>可以发现，到目前位置，kite 框架看起来是比较“简单”的，但是似乎有很多 routine work 多没有提到，比如限流，日志记录，监控上报等等。这就要提到 middleware（中间件）了。kite 通过使用中间件将框架主体与这些 routine work 进行了解藕。kite框架主体，只关注底层请求的接入，routine work 全都集中在了 middleware 当中。这一部分是在 kitool 生成的 Handler 中完成的。</p>
<p>这里先引入两个类型：</p>
<ul>
<li>EndPoint</li>
<li>Middleware</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// EndPoint represent one method for calling from remote.</span></span><br><span class="line"><span class="keyword">type</span> EndPoint <span class="function"><span class="keyword">func</span><span class="params">(ctx context.Context, req <span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(resp <span class="keyword">interface</span>&#123;&#125;, err error)</span></span></span><br><span class="line"><span class="function">// <span class="title">Middleware</span> <span class="title">deal</span> <span class="title">with</span> <span class="title">input</span> <span class="title">EndPoint</span> <span class="title">and</span> <span class="title">output</span> <span class="title">EndPoint</span></span></span><br><span class="line"><span class="function"><span class="title">type</span> <span class="title">Middleware</span> <span class="title">func</span><span class="params">(EndPoint)</span> <span class="title">EndPoint</span></span></span><br></pre></td></tr></table></figure>
<p>可以发现，EndPoint 是一个函数类型，middleware 实际上是一个高级函数，入参是 EndPoint，返回值也是 EndPoint。有这两个类型就可以写出类似这样的代码：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">MyMW</span><span class="params">(next EndPoint)</span> <span class="title">EndPoint</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(ctx contex.Context, req <span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(resp <span class="keyword">interface</span>&#123;&#125;, err error)</span></span> &#123;</span><br><span class="line">        <span class="comment">//do something before next</span></span><br><span class="line">        rsp, err := next(ctx, req)</span><br><span class="line">        <span class="comment">//do something after next</span></span><br><span class="line">        <span class="keyword">return</span> rsp, err</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里的 MyMW 返回了一个新的 EndPoint，实际上是一个闭包，wrap 了 next。当执行下面的代码时，实际上执行的是 MyMW 返回的新 EndPoint，这个 EndPoint 可以在执行 next 之前/之后，执行一些 pre/after 操作。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newNext := MyMW(next)</span><br></pre></td></tr></table></figure>
<p>并且，由于 middleware 的入参和返回值都是同一个类型，因此 middleware 还可以串联起来：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">n1 := MyMW1(next)</span><br><span class="line">n2 := MyMW2(n1)</span><br><span class="line">n3 := MyM3(n2)</span><br></pre></td></tr></table></figure>
<p>可以发现，使用中间件我们可以在原始的函数之外包上很多层的逻辑。回到框架，kite 就是使用这样的方法在最原始的业务处理函数之外包裹整个过程不需要侵入框架或则侵入业务处理函数中做任何的修改，以一种方便，可扩展，可维护的方式拓展了框架的功能。</p>
</div><div class="tags"><a href="/tags/http/">http</a><a href="/tags/rpc/">rpc</a></div><div class="post-nav"><a class="pre" href="/2019/10/18/ElasticSearch/">ElasticSearch</a><a class="next" href="/2019/06/27/Spring-Cloud/">Spring Cloud</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ElasticSearch/">ElasticSearch</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/data/">data</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/go/">go</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">19</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/Redis/">Redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/jsp/">jsp</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/jsp/Servlet/">Servlet</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/projects/">projects</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/docker/">docker</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/微信小程序/">微信小程序</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/jQuery/" style="font-size: 15px;">jQuery</a> <a href="/tags/ElasticSearch/" style="font-size: 15px;">ElasticSearch</a> <a href="/tags/Eclipse/" style="font-size: 15px;">Eclipse</a> <a href="/tags/go/" style="font-size: 15px;">go</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/jsp/" style="font-size: 15px;">jsp</a> <a href="/tags/JavaWeb/" style="font-size: 15px;">JavaWeb</a> <a href="/tags/rpc/" style="font-size: 15px;">rpc</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/vim/" style="font-size: 15px;">vim</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/七牛云/" style="font-size: 15px;">七牛云</a> <a href="/tags/CDN/" style="font-size: 15px;">CDN</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/RSS/" style="font-size: 15px;">RSS</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/ftp/" style="font-size: 15px;">ftp</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/projects/" style="font-size: 15px;">projects</a> <a href="/tags/jre/" style="font-size: 15px;">jre</a> <a href="/tags/jdk/" style="font-size: 15px;">jdk</a> <a href="/tags/微信小程序/" style="font-size: 15px;">微信小程序</a> <a href="/tags/Servlet/" style="font-size: 15px;">Servlet</a> <a href="/tags/IO/" style="font-size: 15px;">IO</a> <a href="/tags/Hadoop/" style="font-size: 15px;">Hadoop</a> <a href="/tags/hive/" style="font-size: 15px;">hive</a> <a href="/tags/集合/" style="font-size: 15px;">集合</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/操作系统/" style="font-size: 15px;">操作系统</a> <a href="/tags/数组/" style="font-size: 15px;">数组</a> <a href="/tags/String/" style="font-size: 15px;">String</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/JVM/" style="font-size: 15px;">JVM</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/07/15/Hive/">Hive</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/15/Hadoop核心组件/">Hadoop核心组件</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/05/Docker安装ES及IK分词器/">Docker安装ES相关</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/03/Go-数组和切片/">Go 数组、字符串和切片</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/02/Go-struct-类型Channel/">Go struct{}类型Channel</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/16/Concurrency-in-Go/">Concurrency in Go</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/22/Docker搭建FTP/">Docker搭建FTP</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/30/Go-Garbage-Collection/">Go Garbage Collection</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/20/git/">git</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/18/ElasticSearch/">ElasticSearch</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/pomo16" title="我的Github" target="_blank">我的Github</a><ul></ul><a href="https://blog.csdn.net/pomo16" title="我的CSDN" target="_blank">我的CSDN</a><ul></ul><a href="http://pomo16.coding.me/" title="我的老博客(荒废已久)" target="_blank">我的老博客(荒废已久)</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">Atlantis.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script><!-- 添加点击爱心功能--><script type="text/javascript" src="/js/clicklove.js?v=0.0.0"></script></div></body></html>